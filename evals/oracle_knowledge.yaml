# Oracle Knowledge Evaluation
# Tests scenarios requiring o3 model invocation

name: oracle_knowledge
description: "Evaluates oracle (o3) triggering and deep reasoning capabilities"

eval_type: oracle_required
registry_path: amp-eval/adapters
runner: amp_runner

dataset:
  - prompt: "consult the oracle: What are the theoretical limits of current transformer architectures and how might quantum computing change neural network training paradigms?"
    expected_model: "o3"
    task_tag: "oracle_required"
    evaluation_criteria:
      - oracle_triggered: true
      - response_depth: "advanced"
      - reasoning_quality: "high"
    id: "quantum_ml_theory"
    difficulty: "expert"

  - prompt: "consult the oracle: Analyze this distributed systems architecture for potential Byzantine fault tolerance issues and propose a consensus algorithm that handles network partitions better than Raft"
    expected_model: "o3"
    task_tag: "oracle_required"
    evaluation_criteria:
      - oracle_triggered: true
      - technical_accuracy: "high"
      - novel_insights: "present"
    id: "byzantine_consensus_analysis"
    difficulty: "expert"
    
  - prompt: "consult the oracle: Given this codebase, identify subtle memory safety issues that static analysis might miss and explain how Rust's ownership system would prevent them"
    expected_model: "o3"
    task_tag: "oracle_required"
    evaluation_criteria:
      - oracle_triggered: true
      - security_analysis: "comprehensive"
      - language_expertise: "deep"
    id: "memory_safety_analysis"
    difficulty: "expert"

scoring:
  method: "oracle_evaluation"
  criteria:
    - oracle_triggered: 25      # 25% for proper o3 invocation
    - reasoning_depth: 30       # 30% for sophisticated reasoning
    - technical_accuracy: 25    # 25% for correct technical content
    - insight_quality: 20       # 20% for novel/valuable insights
  
  pass_threshold: 75
  expert_threshold: 90

grading_template: |
  Oracle evaluation for {id}:
  Model used: {actual_model} (expected: {expected_model})
  Oracle triggered: {oracle_triggered}
  Reasoning depth: {reasoning_depth}
  Technical accuracy: {technical_accuracy}
  Insight quality: {insight_quality}
  Score: {score}/100
  
  Response analysis:
  {response_analysis}

metadata:
  model_tags: ["oracle", "o3", "deep_reasoning", "expert"]
  timeout_seconds: 300  # Longer timeout for complex reasoning
  requires_oracle: true
  hallucination_risk: "high"
